# AWS Lambda function permissions

Permissions to invoke the function are controlled using an IAM resource-based policy. An IAM execution role defines the permissions that control what the function is allowed to do when interacting with other AWS services. Look at the full interaction of these two permission types and then explore each one in further detail.

2 types are there
- iam resource policy
- iam execution role

Resource policies grant permissions to invoke the function

execution role strictly controls what the function can to do within the other AWS service.

lambda is given a role

policy for this role defines the action the role is allowed to take

The resource-based policy is an easier option 
and you can see and modify it via the Lambda console. 
A consideration with cross-account permissions is 
that a resource policy does have a size limit. 
If you have many different accounts that need to 
invoke the function and you have to add permissions 
for each account via the resource policy, you might 
reach the policy size limit. In that case, 
you would need to use IAM roles instead of resource policies. 

Resource-Based policy | execution role
-|-
Lambda resource-based (function) policy   | IAM execution role
O) Associated with a "push" event source such as Amazon API Gateway | O) Role selected or created when you create a Lambda function
O) Created when you add a trigger to a Lambda function | O) IAM policy includes actions you can take with the resource
O) Allows the event source to take the lambda:InvokeFunction action | O) Trust policy that allows Lambda to AssumeRole
O)  | O) Creator must have permission for `iam:PassRole`

# easy of use
For ease of policy management, you can use authoring tools such as the AWS Serverless Application Model (AWS SAM) to help manage your policies. For a Lambda function, AWS SAM scopes the permissions of your Lambda functions to the resources used by your application. You can add IAM policies as part of the AWS SAM template. The policies property can be the name of AWS managed policies, inline IAM policy documents, or AWS SAM policy templates. AWS SAM is discussed in more detail later in this course.

> **Note**
> **Accessing resources in a VPC**
Enabling your Lambda function to access resources inside your virtual private cloud (VPC) requires additional VPC-specific configuration information, such as VPC subnet IDs and security group IDs. This functionality allows Lambda to access resources in the VPC. It does not change how the function is secured. You also need an execution role with permissions to create, describe, and delete elastic network interfaces. Lambda provides a permissions policy for this purpose named "AWSLambdaVPCAccessExecutionRole".
To learn more about attaching your Lambda functions to a VPC, see Configuring a Lambda function to access resources in a VPC in the AWS Lambda Developer Guide.

### Lambda and AWS PrivateLink

To establish a private connection between your VPC and Lambda, create an interface VPC endpoint. Interface endpoints are powered by AWS PrivateLink, which enables you to privately access Lambda APIs without an internet gateway, NAT device, VPN connection, or AWS Direct Connect connection. 

Instances in your VPC don't need public IP addresses to communicate with Lambda APIs. Traffic between your VPC and Lambda does not leave the AWS network. 

https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html


